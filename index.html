<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test de Prejuicios</title>
    <!-- Fuente Luckiest Guy de Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet" />
    <style>
        /* Estilos base */
        body {
            background-color: #FFF8E5; /* color de fondo claro y cálido */
            color: #333;
            font-family: 'Luckiest Guy', cursive, sans-serif;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin: 10px 0 5px;
            color: #FF4081; /* un color vibrante para el título */
        }
        p.intro {
            text-align: center;
            font-size: 1.1em;
            margin: 5px 0 20px;
            color: #555;
            line-height: 1.4;
            font-family: 'Luckiest Guy', cursive, sans-serif;
        }
        /* Personaje */
        #character {
            position: relative;
            width: 100px;
            height: 140px;
            margin: 0 auto 10px;
            cursor: pointer;
        }
        /* Elementos del personaje */
        #character .head {
            position: relative;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #FCD7B8; /* tono piel claro por defecto, se cambiará por personaje */
            margin: 0 auto;
            z-index: 1;
        }
        #character .eye {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #000;
            border-radius: 50%;
            top: 18px;
        }
        #character .eye-left { left: 18px; }
        #character .eye-right { right: 18px; }
        #character .mouth {
            position: absolute;
            width: 12px;
            height: 6px;
            top: 35px;
            left: 50%;
            transform: translateX(-50%);
            background: #000;
            border-radius: 0 0 6px 6px; /* forma de media luna (sonrisa) por defecto */
        }
        #character .body {
            position: absolute;
            top: 55px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 50px;
            background: #8BC34A; /* color de camiseta por defecto */
            border-radius: 15px;
        }
        #character .feature {
            position: absolute;
        }
        /* Historieta/personality del personaje */
        #charStory {
            max-width: 300px;
            margin: 0 auto 20px;
            text-align: center;
            font-size: 0.9em;
            color: #333;
            display: none;
        }
        /* Preguntas */
        #questions-container {
            max-width: 800px;
            margin: 0 auto;
            column-count: 2;  /* mostrar en 2 columnas en pantallas grandes */
            column-gap: 40px;
        }
        @media (max-width: 600px) {
            #questions-container {
                column-count: 1; /* en pantallas pequeñas, 1 columna */
            }
        }
        ul.question-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        ul.question-list li {
            margin-bottom: 15px;
        }
        .question-text {
            display: block;
            margin-bottom: 5px;
            font-size: 0.95em;
            line-height: 1.3;
            color: #222;
        }
        .answers label {
            display: inline-block;
            padding: 5px 12px;
            margin-right: 10px;
            border: 2px solid;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            user-select: none;
            transition: all 0.2s;
        }
        .answers label:hover {
            transform: translateY(-2px);
        }
        /* Colores para Sí (orange) y No (teal) */
        .answers label[for$="yes"] {
            border-color: #FF9800;
            color: #FF9800;
        }
        .answers label[for$="no"] {
            border-color: #009688;
            color: #009688;
        }
        /* Ocultar inputs de radio */
        .answers input[type="radio"] {
            display: none;
        }
        /* Estilos cuando está seleccionado */
        .answers input[type="radio"]:checked + label {
            color: #fff;
        }
        #questions-container input[type="radio"]:checked + label[for$="yes"] {
            background-color: #FF9800;
        }
        #questions-container input[type="radio"]:checked + label[for$="no"] {
            background-color: #009688;
        }
        /* Botón de resultados */
        #submitBtn {
            background-color: #FF4081;
            color: #fff;
            font-family: 'Luckiest Guy', cursive, sans-serif;
            font-size: 1.1em;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
            transition: background-color 0.2s;
        }
        #submitBtn:hover {
            background-color: #E91E63;
        }
        /* Canvas del gráfico */
        #chartContainer {
            width: 90%;
            max-width: 500px;
            margin: 30px auto;
            text-align: center;
        }
        #resultChart {
            width: 100%;
            max-width: 500px;
            height: auto;
            display: none; /* oculto inicialmente */
        }
        /* Mensaje de captura de pantalla */
        #screenshotMsg {
            max-width: 500px;
            margin: 15px auto;
            font-size: 0.9em;
            text-align: center;
            color: #555;
            display: none;
            line-height: 1.4;
        }
        /* Elementos decorativos (formas de colores) */
        .deco {
            position: absolute;
            opacity: 0.3;
        }
        .deco.circle1 {
            width: 50px; height: 50px; background: #FF9800; border-radius: 50%; top: 20px; left: 20px;
        }
        .deco.circle2 {
            width: 30px; height: 30px; background: #009688; border-radius: 50%; top: 250px; right: 20px;
        }
        .deco.square1 {
            width: 40px; height: 40px; background: #9C27B0; transform: rotate(45deg); top: 100px; left: 5%;
        }
        .deco.square2 {
            width: 20px; height: 20px; background: #FFC107; transform: rotate(45deg); bottom: 100px; right: 10%;
        }
        .deco.triangle {
            width: 0; height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom: 35px solid #03A9F4;
            top: 60%; left: 10%;
        }
    </style>
</head>
<body>
    <h1>Test de Prejuicios</h1>
    <p class="intro">Responde <strong>Sí</strong> o <strong>No</strong> a todas las preguntas abajo. <br/>
    Al terminar, haz clic en <em>Ver Resultados</em> para ver tu perfil.</p>
    <!-- Personaje -->
    <div id="character">
        <div class="head"></div>
        <div class="eye eye-left"></div>
        <div class="eye eye-right"></div>
        <div class="mouth"></div>
        <div class="body"></div>
        <div class="feature extra1"></div>
        <div class="feature extra2"></div>
    </div>
    <div id="charStory"></div>
    <!-- Contenedor de preguntas -->
    <div id="questions-container">
        <ul class="question-list" id="questionList">
            <!-- Las preguntas se insertarán aquí dinámicamente -->
        </ul>
    </div>
    <button id="submitBtn">Ver Resultados</button>
    <!-- Contenedor del gráfico de resultados -->
    <div id="chartContainer">
        <canvas id="resultChart"></canvas>
    </div>
    <div id="screenshotMsg"></div>

    <!-- Cargar Chart.js (desde CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
    // Definición de preguntas por categoría (arrays de strings)
    var preguntasRacial = [
        "¿Crees que algunas razas o etnias son más inteligentes que otras?",
        "Si un familiar tuyo se casara con alguien de otra raza, ¿te incomodaría?",
        "¿Has contado o reído chistes basados en estereotipos raciales?",
        "¿Te sentirías inseguro caminando por un barrio donde la mayoría de residentes son de otra raza que la tuya?",
        "¿Piensas que las personas de ciertas etnias tienen tendencias naturales hacia el crimen o la violencia?",
        "Al conocer a una persona, ¿te fijas en su color de piel antes que en otras cualidades?",
        "¿Crees que la discriminación racial ya no es un problema importante en la sociedad actual?",
        "¿Te incomoda ver parejas interraciales?",
        "¿Has pensado alguna vez que alguien obtuvo un trabajo o beca solo por su raza y no por sus méritos?",
        "Si un desconocido de otra raza se te acerca en la calle para pedirte ayuda, ¿dudarías más en ayudarlo que si fuera de tu raza?",
        "¿Crees que es aceptable decir \"regresa a tu país\" a alguien nacido en tu país pero de diferente origen étnico?",
        "¿Has usado palabras despectivas para referirte a personas de otra raza (aunque sea en privado)?",
        "¿Te parece que exageran las personas que denuncian racismo en bromas o comentarios cotidianos?",
        "¿Preferirías evitar comprar en un negocio atendido por personas de cierta etnia?",
        "¿Asumes que alguien es bueno en cierto deporte o música solo por su origen étnico?",
        "Si tu jefe inmediato fuera de una raza minoritaria distinta a la tuya, ¿te costaría aceptar sus órdenes o liderazgo?",
        "¿Crees que en ciertos países la gente es 'de tal manera' (perezosa, sucia, fría, etc.) por su raza u origen?",
        "¿Te molesta cuando una persona de otra raza destaca o tiene éxito en un ámbito donde tu grupo suele dominar?",
        "¿Te has alejado deliberadamente de alguien en un espacio público por prejuicios sobre su raza?",
        "¿Crees que es normal preferir amistad con personas de tu misma raza y que no es racismo sino “gustos personales”?",
        "¿Evitarías que tus hijos jugaran con niños de otra etnia o raza?"
    ];

    var preguntasGenero = [
        "¿Crees que los hombres están naturalmente más capacitados para ciertas tareas o trabajos que las mujeres?",
        "¿Piensas que las mujeres deberían ser las principales encargadas de las tareas del hogar?",
        "¿Te incomoda ver a un hombre expresar abiertamente sus emociones (por ejemplo, llorar)?",
        "¿Crees que los hombres son mejores conductores que las mujeres?",
        "Si un jefe es mujer, ¿tiendes a cuestionar más sus decisiones que si fuera hombre?",
        "¿Has hecho o reído chistes machistas (que ridiculizan a las mujeres por ser mujeres)?",
        "¿Te parece que cuando una mujer se enfada es \"histérica\" pero si un hombre lo hace es algo normal?",
        "¿Piensas que un hombre que decide quedarse en casa a cuidar a los hijos es menos hombre?",
        "¿Te molesta o extraña ver mujeres en trabajos tradicionalmente masculinos (ejemplo: mecánica, construcción)?",
        "¿Crees que las personas transgénero están equivocadas y su género \"real\" es el de nacimiento?",
        "¿Evitarías usar los pronombres o el nombre preferido de una persona trans porque \"no es su género real\"?",
        "¿Consideras que los hombres no deben realizar tareas consideradas femeninas, como cocinar o limpiar, en la misma medida?",
        "¿Crees que las mujeres son demasiado emocionales para puestos de alta responsabilidad?",
        "Si vieras a un niño jugando con muñecas o a una niña jugando con coches, ¿tratarías de redirigirlo hacia juegos \"propios de su género\"?",
        "¿Te incomoda la idea de tener un colega cercano que sea no binario (que no se identifica como hombre ni mujer)?",
        "¿Crees que en un equipo de trabajo mixto, las mujeres deberían asumir roles más de apoyo y los hombres liderar?",
        "¿Has cuestionado la competencia de una profesional (doctora, ingeniera) solo por ser mujer, pensando que un hombre lo haría mejor?",
        "¿Opinas que los hombres gays no encajan en tu concepto de \"verdadero hombre\"?",
        "¿Te resultaría incómodo que tu hijo/a tuviera como profesor a alguien transgénero o no binario?",
        "¿Crees que las mujeres que se visten de manera provocativa son responsables si sufren acoso?",
        "¿Pensarías que algo \"anda mal\" si una niña nunca quiere vestir de rosa ni jugar con muñecas?"
    ];

    var preguntasReligiosa = [
        "¿Consideras que tu religión o creencias son superiores a las de otras personas?",
        "¿Te incomoda trabajar o estudiar junto a alguien que practique una religión muy distinta a la tuya?",
        "¿Piensas automáticamente que alguien de cierta religión, por ejemplo musulmán, podría ser un extremista o peligroso?",
        "¿Has hecho bromas o comentarios negativos generalizando sobre una religión (ejemplo: todos los __ son __)?",
        "Si un amigo cercano se convirtiera a otra religión, ¿te costaría aceptarlo o entenderlo?",
        "¿Crees que las personas sin religión (ateos) tienen menos valores morales que las religiosas?",
        "¿Te molesta ver a personas exhibiendo símbolos religiosos (cruz, velo, turbante) en lugares públicos?",
        "¿Evitarías que tu hijo/a se casara con alguien de cierta religión que desapruebas?",
        "¿Piensas que algunas religiones modernas son sectas peligrosas sin realmente informarte de ellas?",
        "¿Has excluido o dejado de invitar a alguien a eventos sociales por sus creencias religiosas?",
        "¿Crees que las personas muy devotas de su religión son ignorantes o han sido \"lavadas del cerebro\"?",
        "¿Te sientes incómodo discutiendo temas científicos con alguien muy religioso porque asumes que no entenderá?",
        "Si un compañero de trabajo pide tiempo para orar durante el día, ¿te parecería inapropiado en el entorno laboral?",
        "¿Crees que algunas religiones promueven únicamente cosas malas y no pueden tener aspectos positivos?",
        "Si tuvieras un jefe de una religión minoritaria, ¿dudarías de sus decisiones por sus creencias?",
        "¿Te burlarías o harías comentarios sarcásticos si alguien te dice que confía en la voluntad de Dios?",
        "¿Has evitado entablar amistad con alguien tras enterarte de que practica una religión que consideras rara?",
        "¿Crees que las guerras y conflictos siempre son culpa de la religión y que el mundo estaría mejor sin ninguna?",
        "¿Te molestaría que se construyera un centro de culto (iglesia, mezquita, etc.) de una religión ajena cerca de tu comunidad?",
        "¿Piensas que las festividades religiosas de otras culturas son extrañas o ridículas?",
        "¿Tratas con menos respeto a alguien que sabes que tiene creencias muy distintas a las tuyas?"
    ];

    var preguntasCapacitista = [
        "¿Crees que las personas con discapacidad deben centrarse en sus limitaciones y no intentar ciertas cosas?",
        "¿Te sientes incómodo al interactuar con alguien que tiene una discapacidad visible porque no sabes cómo actuar?",
        "¿Has usado términos ofensivos para referirte a personas con discapacidad (aunque sea bromeando)?",
        "¿Asumes que una persona en silla de ruedas también tiene alguna discapacidad mental, o viceversa?",
        "Si tu empresa tuviera que contratar a un candidato con una discapacidad evidente, ¿pensarías que sería menos productivo que los demás?",
        "¿Te molesta si alguien con discapacidad recibe adaptaciones especiales (rampas, horarios) porque lo ves como trato preferencial?",
        "¿Crees que las personas con trastornos mentales (depresión, ansiedad, etc.) exageran y deberían simplemente \"echarle ganas\"?",
        "¿Evitarías salir románticamente con alguien solo por enterarte de que tiene una discapacidad?",
        "¿Tiendes a hablarle más fuerte o más lento a alguien con discapacidad sin que te lo pidan, como si no pudiera entenderte?",
        "¿Has pensado que ciertas actividades (viajar solo, vivir independiente) no son para personas con discapacidad?",
        "¿Crees que todas las personas con autismo, síndrome de Down u otras condiciones son más o menos iguales en comportamiento?",
        "¿Te incomoda ver a una pareja donde una persona tiene discapacidad y la otra no?",
        "Si ves a alguien usando un estacionamiento para discapacitados sin aparentemente tener nada, ¿asumes que está abusando de ello (aunque podría tener una discapacidad invisible)?",
        "¿Piensas que los atletas paralímpicos no son tan atletas como los olímpicos?",
        "¿Te daría miedo o rechazo interactuar con alguien con una discapacidad cognitiva severa?",
        "¿Crees que se gasta demasiado en hacer sitios accesibles para relativamente pocas personas?",
        "¿Te sorprende en exceso cuando una persona con discapacidad logra algo, como si fuera extraordinario solo por su condición?",
        "¿Has evitado conversar con alguien en silla de ruedas u otra ayuda técnica porque no sabías cómo saludarlo normalmente?",
        "¿Crees que las personas con discapacidad deben \"aceptar sus límites\" y no intentar integrarse en todos los ámbitos?",
        "¿Te molestaría tener un jefe o líder de equipo con una discapacidad significativa?",
        "¿Alguna vez has dudado de la veracidad de la discapacidad de alguien pensando que tal vez exagera o finge?"
    ];

    var preguntasCultural = [
        "¿Crees que tu cultura o país es en general mejor que otros?",
        "¿Te molesta cuando escuchas a personas hablando en un idioma que no entiendes en público?",
        "¿Has imitado o exagerado el acento de alguien de otra región o país para burlarte?",
        "¿Piensas que los inmigrantes suelen traer problemas o delincuencia al país?",
        "¿Prefieres no ver películas o series de cierto país porque asumes que no serán buenas solo por su origen?",
        "¿Te has quejado de que en tu país hay costumbres extranjeras que arruinan la cultura local?",
        "¿Crees que es justificable desconfiar de alguien que habla con fuerte acento extranjero en tu idioma?",
        "¿Evitarías que tu hijo hiciera amistad con un niño que no hable bien tu idioma?",
        "¿Te parece que ciertas comunidades inmigrantes no se esfuerzan por integrarse y eso te molesta?",
        "¿Has usado expresiones como \"tercermundista\" de forma despectiva para referirte a algo de otro país?",
        "Si recibes atención al cliente por teléfono y la persona tiene acento extranjero, ¿dudas de su capacidad o te molesta?",
        "¿Crees que hay nacionalidades naturalmente más trabajadoras y otras más perezosas?",
        "¿Te sientes incómodo cuando eres la única persona de tu nacionalidad en un grupo?",
        "¿Has pensado que las personas que no hablan bien tu idioma son menos inteligentes?",
        "¿Te molesta cuando los inmigrantes mantienen sus costumbres en lugar de adoptar por completo las locales?",
        "¿Evitarías visitar ciertos países porque crees que su gente no te trataría bien por ser extranjero?",
        "¿Crees que en tu país deberían restringir la entrada a personas de ciertos países o culturas?",
        "¿Te ofende que alguien de otro país critique aspectos de tu cultura?",
        "¿Has tenido prejuicios contra alguien por provenir de una región específica de tu propio país?",
        "¿Crees que la globalización está diluyendo la identidad nacional y eso te preocupa?",
        "¿Evitarías probar la comida típica de alguna cultura por prejuicios sobre sus ingredientes o higiene?"
    ];

    var preguntasSocioeconomica = [
        "¿Crees que si alguien es pobre es mayormente por falta de esfuerzo?",
        "¿Te has referido despectivamente a personas de bajos recursos con términos ofensivos (ejemplo: vagos)?",
        "¿Te sentirías incómodo teniendo una cita con alguien de un nivel socioeconómico mucho más bajo que el tuyo?",
        "¿Crees que las personas que viven en la calle seguramente hicieron algo para merecerlo?",
        "Si alguien se veste con ropa muy humilde o gastada, ¿lo tratas diferente que a alguien con ropa elegante?",
        "¿Evitarías ir a la casa de alguien si vive en un barrio muy pobre o conocido por la delincuencia?",
        "¿Crees que las personas con menos educación formal son menos inteligentes o cultas?",
        "¿Te molesta ver a personas de bajos recursos recibiendo ayudas del gobierno?",
        "¿Has pensado que la gente pobre tiene valores diferentes o inferiores a los tuyos?",
        "¿Tratarías con mayor respeto a alguien que sabes que es millonario frente a alguien de clase media?",
        "¿Te parece mal que personas de bajos recursos accedan a lugares o servicios \"exclusivos\"?",
        "¿Crees que la gente rica es generalmente egoísta o superficial?",
        "Si invitaras amigos a tu casa, ¿te avergonzaría si fuera mucho más humilde que la de ellos?",
        "¿Has evitado una amistad tras descubrir que la persona tenía mucho menos dinero que tú?",
        "¿Piensas que la gente de clase alta suele mirar en menos a los demás (y por eso evitas tratarlos)?",
        "¿Te incomodaría que tu hijo se case con alguien de una familia mucho más pobre?",
        "¿Crees que la gente de barrios marginales no quiere mejorar su situación?",
        "¿Evitas lugares donde suele haber muchos vendedores ambulantes o gente pidiendo dinero?",
        "¿Te sientes incómodo en reuniones donde hay personas de niveles económicos muy diversos?",
        "¿Crees que alguien con un coche muy viejo es menos exitoso que quien tiene uno nuevo?",
        "¿Has pensado que ciertos servicios de calidad deberían ser privilegio de quien pueda pagarlos y no para todos?"
    ];

    var preguntasEdad = [
        "¿Crees que la mayoría de las personas mayores de 65 años no entienden de tecnología?",
        "¿Evitarías contratar a alguien cercano a la edad de jubilación, aunque esté capacitado, por su edad?",
        "¿Te parece que los adolescentes son por lo general irresponsables y poco fiables?",
        "¿Has usado frases como \"Ok, boomer\" o \"millennial típico\" para descartar la opinión de alguien por su edad?",
        "¿Crees que a partir de cierta edad (ejemplo: 70 años) las personas ya no deben tomar decisiones importantes por sí mismas?",
        "¿Te sientes incómodo recibiendo órdenes de alguien mucho más joven que tú en el trabajo?",
        "¿Piensas que las personas de veintitantos años hoy son demasiado sensibles o \"de cristal\"?",
        "¿Tiendes a creer que los conductores jóvenes son imprudentes solo por su edad?",
        "¿Has pensado que alguien es \"demasiado viejo\" para vestir de cierta manera o escuchar cierto tipo de música?",
        "¿Evitas invitar a personas de mucha mayor edad a ciertas actividades asumiendo que no podrán seguir el ritmo?",
        "¿Crees que los niños pequeños no pueden tener opiniones válidas hasta que crezcan más?",
        "¿Te molesta cuando alguien menor que tú trata de aconsejarte o enseñarte algo?",
        "¿Asumes que una persona muy joven en un puesto alto obtuvo el trabajo por conexiones y no por mérito?",
        "¿Crees que las personas mayores no deberían participar en ciertos deportes o actividades \"juveniles\"?",
        "¿Te sientes avergonzado de la idea de salir a divertirte con personas mucho más jóvenes o mayores que tú?",
        "¿Has dicho o pensado \"ya se le pasó la edad para eso\" sobre alguien que intenta algo nuevo de adulto?",
        "¿Prefieres aprender cosas nuevas de alguien de tu edad o mayor, desconfiando si es mucho más joven?",
        "¿Crees que los adolescentes de hoy tienen menos valores o disciplina que los de tu generación?",
        "¿Te niegas a considerar ideas o tendencias nuevas solo porque vienen de gente muy joven?",
        "¿Te parece normal bromear sobre la edad de alguien (llamarlo viejo o niño) aunque no lo harías sobre otras características?",
        "¿Piensas que en ciertos campos (tecnología, moda) la gente mayor ya no puede aportar cosas innovadoras?"
    ];

    // Combinar todas las preguntas en una lista con su categoría
    var todasPreguntas = [];
    preguntasRacial.forEach(function(p) { todasPreguntas.push({texto: p, categoria: "racial"}); });
    preguntasGenero.forEach(function(p) { todasPreguntas.push({texto: p, categoria: "genero"}); });
    preguntasReligiosa.forEach(function(p) { todasPreguntas.push({texto: p, categoria: "religiosa"}); });
    preguntasCapacitista.forEach(function(p) { todasPreguntas.push({texto: p, categoria: "capacitista"}); });
    preguntasCultural.forEach(function(p) { todasPreguntas.push({texto: p, categoria: "cultural"}); });
    preguntasSocioeconomica.forEach(function(p) { todasPreguntas.push({texto: p, categoria: "socioeconomica"}); });
    preguntasEdad.forEach(function(p) { todasPreguntas.push({texto: p, categoria: "edad"}); });
    // Mezclar las preguntas aleatoriamente (Fisher-Yates)
    for (var i = todasPreguntas.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var temp = todasPreguntas[i];
        todasPreguntas[i] = todasPreguntas[j];
        todasPreguntas[j] = temp;
    }

    // Insertar las preguntas en el DOM
    var questionList = document.getElementById("questionList");
    todasPreguntas.forEach(function(qObj, index) {
        // Crear elementos de lista con texto y opciones de sí/no
        var li = document.createElement("li");
        var spanText = document.createElement("span");
        spanText.className = "question-text";
        spanText.textContent = qObj.texto;
        var answersSpan = document.createElement("span");
        answersSpan.className = "answers";
        // Crear inputs radio Sí y No con labels
        var yesId = "q" + index + "yes";
        var noId = "q" + index + "no";
        var inputYes = document.createElement("input");
        inputYes.type = "radio";
        inputYes.id = yesId;
        inputYes.name = "q" + index;
        inputYes.value = "yes";
        var labelYes = document.createElement("label");
        labelYes.htmlFor = yesId;
        labelYes.textContent = "Sí";
        var inputNo = document.createElement("input");
        inputNo.type = "radio";
        inputNo.id = noId;
        inputNo.name = "q" + index;
        inputNo.value = "no";
        var labelNo = document.createElement("label");
        labelNo.htmlFor = noId;
        labelNo.textContent = "No";
        // Añadir elementos a la lista
        answersSpan.appendChild(inputYes);
        answersSpan.appendChild(labelYes);
        answersSpan.appendChild(inputNo);
        answersSpan.appendChild(labelNo);
        li.appendChild(spanText);
        li.appendChild(answersSpan);
        // Guardar categoría como atributo (para uso futuro si se quiere)
        li.setAttribute("data-categoria", qObj.categoria);
        questionList.appendChild(li);
    });

    // Lógica del personaje aleatorio
    var charIndex = Math.floor(Math.random() * 10);
    var characterEl = document.getElementById("character");
    var charStoryEl = document.getElementById("charStory");
    // Definir características de cada personaje (colores, accesorios, historia)
    var personajes = [
        {
            skin: "#FCD7B8", hair: "#8B4513", bodyColor: "#8BC34A",
            extra1: {type: "hair", width: "60px", height: "30px", top: "-5px", background: "#8B4513", borderRadius: "50%"},
            extra2: null,
            mouthStyle: "smile",
            story: "¡Hola! Soy Ana, me encanta aprender idiomas y defender la igualdad."
        },
        {
            skin: "#8D5524", hair: null, bodyColor: "#FF9800",
            extra1: null, extra2: null,
            mouthStyle: "neutral",
            story: "Soy Beto. Soy muy curioso y siempre hago preguntas para entender a los demás."
        },
        {
            skin: "#C68642", hair: "#BBB", bodyColor: "#03A9F4",
            extra1: {type: "hair", width: "60px", height: "20px", top: "0px", background: "#BBB", borderRadius: "0 0 50% 50%"},
            extra2: null,
            mouthStyle: "smile",
            story: "Me llamo Carlos. Soy un profesor jubilado al que le encanta la tecnología."
        },
        {
            skin: "#F1C27D", hair: "#367C94", bodyColor: "#FFC107",
            extra1: {type: "hair", width: "70px", height: "70px", top: "-5px", background: "#367C94", borderRadius: "50%"},
            extra2: null,
            mouthStyle: "neutral",
            story: "Soy Dalia. Llevo mi pañuelo con orgullo y estudio ingeniería."
        },
        {
            skin: "#FFDBAC", hair: "#000", bodyColor: "#9C27B0",
            extra1: {type: "hat", width: "50px", height: "20px", top: "-10px", background: "#000", borderRadius: "5px"},
            extra2: null,
            mouthStyle: "smile",
            story: "¡Hey! Soy Ema. Siempre llevo mi gorra de la suerte a todos lados."
        },
        {
            skin: "#FFD1DC", hair: "#E91E63", bodyColor: "#00BCD4",
            extra1: {type: "hair", width: "60px", height: "30px", top: "-5px", background: "#E91E63", borderRadius: "50%"},
            extra2: null,
            mouthStyle: "smile",
            story: "Soy Flor. Mi cabello rosa refleja mi personalidad alegre y creativa."
        },
        {
            skin: "#FFE0BD", hair: null, bodyColor: "#FF5722",
            extra1: {type: "glasses", leftEyeX: 14, rightEyeX: 40, top: "18px"},
            extra2: null,
            mouthStyle: "smile",
            story: "Hola, soy Guille. Siempre tengo mis gafas listas para leer un buen libro."
        },
        {
            skin: "#F1C27D", hair: "#000", bodyColor: "#4CAF50",
            extra1: {type: "hair", width: "50px", height: "50px", top: "0px", background: "#000", borderRadius: "50%"},
            extra2: null,
            mouthStyle: "neutral",
            story: "Me llamo Hiro. Soy programador y a veces puedo ser tímido, ¡pero me encanta hacer amigos!"
        },
        {
            skin: "#8D5524", hair: "#FFEB3B", bodyColor: "#795548",
            extra1: {type: "hair", width: "0", height: "0", borderLeft: "15px solid transparent", borderRight: "15px solid transparent", borderBottom: "30px solid #FFEB3B", top: "-15px", left: "50%", marginLeft: "-15px"},
            extra2: null,
            mouthStyle: "smile",
            story: "Soy Iris. Aunque uso silla de ruedas, ¡nada me detiene en las carreras!"
        },
        {
            skin: "#C68642", hair: "#2F4F4F", bodyColor: "#FF5722",
            extra1: {type: "hair", width: "60px", height: "40px", top: "-10px", background: "#2F4F4F", borderRadius: "50%"},
            extra2: null,
            mouthStyle: "frown",
            story: "Hola, soy José. Tengo un estilo punk y me gusta cuestionar todo."
        }
    ];
    // Aplicar propiedades del personaje seleccionado
    var personaje = personajes[charIndex];
    // piel
    characterEl.querySelector('.head').style.backgroundColor = personaje.skin;
    // cabello o accesorio extra1
    var extra1El = characterEl.querySelector('.extra1');
    if (personaje.extra1) {
        extra1El.style.display = "block";
        if (personaje.extra1.type === "hair") {
            extra1El.style.width = personaje.extra1.width;
            extra1El.style.height = personaje.extra1.height;
            extra1El.style.top = personaje.extra1.top;
            extra1El.style.left = "50%";
            extra1El.style.transform = "translateX(-50%)";
            extra1El.style.backgroundColor = personaje.extra1.background;
            extra1El.style.borderRadius = personaje.extra1.borderRadius;
            extra1El.style.zIndex = "0";
        } else if (personaje.extra1.type === "hat") {
            extra1El.style.width = personaje.extra1.width;
            extra1El.style.height = personaje.extra1.height;
            extra1El.style.top = personaje.extra1.top;
            extra1El.style.left = "50%";
            extra1El.style.transform = "translateX(-50%)";
            extra1El.style.backgroundColor = personaje.extra1.background;
            extra1El.style.borderRadius = personaje.extra1.borderRadius;
            extra1El.style.zIndex = "2";
        } else if (personaje.extra1.type === "glasses") {
            // crear lentes alrededor de los ojos
            extra1El.style.width = "0";
            extra1El.style.height = "0";
            // Dibujar lentes con borde: usaremos pseudo-elementos quizá, pero por simplicidad dibujaremos dos círculos con CSS via JS
            // Crear dos elementos para lentes
            extra1El.innerHTML = "<span class='glasses-lens'></span><span class='glasses-lens'></span>";
            var lensElems = extra1El.querySelectorAll('.glasses-lens');
            lensElems.forEach(function(lens, idx) {
                lens.style.position = "absolute";
                lens.style.width = "14px";
                lens.style.height = "14px";
                lens.style.border = "2px solid #000";
                lens.style.borderRadius = "50%";
                lens.style.top = personaje.extra1.top;
                lens.style.backgroundColor = "transparent";
                if (idx === 0) {
                    lens.style.left = "14px";
                } else {
                    lens.style.right = "14px";
                }
            });
        }
    } else {
        extra1El.style.display = "none";
    }
    // extra2 (si lo hubiera)
    var extra2El = characterEl.querySelector('.extra2');
    if (personaje.extra2) {
        extra2El.style.display = "block";
        // (Ninguno de nuestros personajes usa extra2 en este ejemplo)
    } else {
        extra2El.style.display = "none";
    }
    // color de ropa (body)
    characterEl.querySelector('.body').style.backgroundColor = personaje.bodyColor;
    // estilo de boca
    var mouthEl = characterEl.querySelector('.mouth');
    if (personaje.mouthStyle === "smile") {
        mouthEl.style.width = "12px";
        mouthEl.style.height = "6px";
        mouthEl.style.backgroundColor = "#000";
        mouthEl.style.borderRadius = "0 0 6px 6px";
        mouthEl.style.border = "none";
        mouthEl.style.top = "35px";
    } else if (personaje.mouthStyle === "frown") {
        mouthEl.style.width = "12px";
        mouthEl.style.height = "6px";
        mouthEl.style.backgroundColor = "#000";
        mouthEl.style.borderRadius = "6px 6px 0 0";
        mouthEl.style.border = "none";
        mouthEl.style.top = "38px";
    } else if (personaje.mouthStyle === "neutral") {
        mouthEl.style.width = "8px";
        mouthEl.style.height = "2px";
        mouthEl.style.backgroundColor = "#000";
        mouthEl.style.borderRadius = "1px";
        mouthEl.style.border = "none";
        mouthEl.style.top = "38px";
    }

    // Mostrar historia al hacer clic en el personaje
    charStoryEl.textContent = personaje.story;
    characterEl.addEventListener('click', function() {
        if (charStoryEl.style.display === "none" || charStoryEl.style.display === "") {
            charStoryEl.style.display = "block";
        } else {
            charStoryEl.style.display = "none";
        }
    });

    // Manejar clic en Ver Resultados
    var submitBtn = document.getElementById("submitBtn");
    var resultChartEl = document.getElementById("resultChart");
    var screenshotMsgEl = document.getElementById("screenshotMsg");
    var radarChart; // para almacenar instancia del gráfico
    submitBtn.addEventListener('click', function() {
        // Validar que todas las preguntas tengan respuesta
        var totalPreguntas = todasPreguntas.length;
        var respondidas = document.querySelectorAll('input[type="radio"]:checked').length;
        if (respondidas < totalPreguntas) {
            alert("Por favor, responde a todas las preguntas antes de ver los resultados.");
            return;
        }
        // Calcular resultados por categoría
        var resultados = {
            racial: 0,
            genero: 0,
            religiosa: 0,
            capacitista: 0,
            cultural: 0,
            socioeconomica: 0,
            edad: 0
        };
        todasPreguntas.forEach(function(qObj, idx) {
            var seleccion = document.querySelector('input[name="q' + idx + '"]:checked').value;
            if (seleccion === "yes") {
                resultados[qObj.categoria] += 1;
            }
        });
        // Preparar datos para el gráfico
        var etiquetas = ["Racial", "Género", "Religiosa", "Capacitista", "Cultural", "Socioeconómica", "Edad"];
        var datos = [
            resultados.racial,
            resultados.genero,
            resultados.religiosa,
            resultados.capacitista,
            resultados.cultural,
            resultados.socioeconomica,
            resultados.edad
        ];
        // Crear o actualizar el gráfico radar
        if (!radarChart) {
            var ctx = resultChartEl.getContext('2d');
            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: etiquetas,
                    datasets: [{
                        label: 'Resultados del Test',
                        data: datos,
                        backgroundColor: 'rgba(233,30,99,0.2)',
                        borderColor: 'rgba(233,30,99,1)',
                        pointBackgroundColor: 'rgba(233,30,99,1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    aspectRatio: 1,
                    scales: {
                        r: {
                            beginAtZero: true,
                            pointLabels: { font: { size: 12, family: 'Luckiest Guy, sans-serif' } },
                            ticks: { stepSize: 1 }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        title: {
                            display: true,
                            text: 'Discriminación (Sí = más sesgo en la categoría)',
                            font: { size: 14, family: 'Luckiest Guy, sans-serif' }
                        }
                    }
                }
            });
        } else {
            radarChart.data.datasets[0].data = datos;
            radarChart.update();
        }
        // Mostrar el gráfico y mensaje de captura
        resultChartEl.style.display = "block";
        // Generar instrucciones de captura según dispositivo
        var instrucciones = "Recomendación: realiza una captura de pantalla de tus resultados.<br/>";
        var ua = navigator.userAgent || navigator.platform;
        if (/Windows/i.test(ua)) {
            instrucciones += "En Windows: Presiona <b>Win + Impr Pant</b> (Print Screen) para guardar una captura, o <b>Win + Shift + S</b> para usar la herramienta de recorte.";
        } else if (/Mac/i.test(ua)) {
            instrucciones += "En Mac: Presiona <b>Shift + ⌘ + 3</b> para capturar la pantalla completa, o <b>Shift + ⌘ + 4</b> para capturar una parte.";
        } else if (/Android/i.test(ua)) {
            instrucciones += "En Android: Presiona simultáneamente <b>Volumen Abajo + Encendido</b> para hacer una captura.";
        } else if (/iPhone|iPad|iPod/i.test(ua)) {
            instrucciones += "En iOS: Presiona a la vez <b>Botón lateral (o superior) + Botón de inicio</b> (o <b>Volumen Arriba</b> en modelos sin botón de inicio).";
        } else {
            instrucciones += "En tu dispositivo, utiliza la combinación de teclas o herramienta correspondiente para tomar una captura de pantalla.";
        }
        screenshotMsgEl.innerHTML = instrucciones;
        screenshotMsgEl.style.display = "block";
        // Desplazar la vista hacia el gráfico para que el usuario lo vea
        resultChartEl.scrollIntoView({ behavior: 'smooth' });
    });

    // Agregar elementos decorativos al fondo
    var decoraciones = ['circle1', 'circle2', 'square1', 'square2', 'triangle'];
    decoraciones.forEach(function(cls) {
        var decoEl = document.createElement('div');
        decoEl.className = 'deco ' + cls;
        document.body.appendChild(decoEl);
    });
    </script>
</body>
</html>
